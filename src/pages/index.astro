---
import Layout from '../layouts/Layout.astro';
import { client } from '../lib/microcms';

// SEO用の設定
const pageTitle = "江東区・清澄白河の出張ピアノレッスン | 髙橋遊月ピアノ教室";
const pageDescription = "江東区・清澄白河エリアを中心に活動する講師による出張ピアノ教室です。";

// microCMSからお知らせを取得（最新3件）
const response = await client.get({
  endpoint: "news",
  queries: { limit: 3, fields: ["id", "title", "publishedAt"] }
});
const newsContents = response.contents;
---

<Layout title={pageTitle} description={pageDescription}>
  {/* ダークテーマ用のグローバルスタイル上書き */}
  <style is:global>
    body {
      background-color: #1a1a1a !important;
      color: #e5e5e5 !important;
    }
    /* ヘッダーの色をダークモード対応に */
    header {
      background-color: rgba(26, 26, 26, 0.9) !important;
      border-bottom: 1px solid #333 !important;
    }
    header a, header button span {
      color: #e5e5e5 !important;
    }
    header #mobile-menu {
      background-color: #1a1a1a !important;
    }
    footer {
        border-top: 1px solid #333 !important;
        color: #888 !important;
    }
  </style>

  <main class="font-sans relative selection:bg-gray-700 selection:text-white">
    
    {/* Hero Section */}
    <section class="relative h-screen flex items-center justify-center overflow-hidden">
      <div class="absolute inset-0 z-0">
        <img 
          src="https://images.unsplash.com/photo-1552422535-c45813c61732?q=80&w=2070&auto=format&fit=crop" 
          alt="落ち着いた空間でのピアノレッスン" 
          class="w-full h-full object-cover grayscale brightness-50"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-[#1a1a1a] via-transparent to-black/30"></div>
      </div>

      <div class="relative z-10 text-center px-6 max-w-4xl border-y border-white/20 py-12 backdrop-blur-sm">
        <span class="block mb-6 text-gray-300 font-medium tracking-[0.3em] text-sm md:text-base uppercase">
          Private Piano Lesson
        </span>
        
        <h1 class="text-3xl md:text-6xl font-serif font-light mb-8 leading-tight tracking-wide text-white">
          日常に彩りを添える、<br/>心豊かなピアノの時間
        </h1>
    
        <p class="text-gray-300 text-sm md:text-lg leading-loose font-light">
          江東区・清澄白河エリアの出張レッスン。<br/>
          あなたの大切なピアノで、あなただけの音色を。
        </p>
      </div>
    </section>
    
    {/* News Section */}
    <section class="py-20 px-6 max-w-5xl mx-auto">
      <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 border-b border-gray-800 pb-4">
        <h2 class="text-2xl font-serif text-white">Latest News</h2>
        <a href="/news" class="text-xs text-gray-500 hover:text-white transition-colors uppercase tracking-widest mt-4 md:mt-0">View All →</a>
      </div>

      <div class="grid gap-px bg-gray-800 border border-gray-800">
        {newsContents.length > 0 ? (
          newsContents.map((item: any) => (
            <a href={`/news/${item.id}`} class="block group bg-[#1a1a1a] p-6 hover:bg-[#222] transition-colors">
              <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div class="flex flex-col md:flex-row md:items-center gap-6">
                  <span class="text-xs text-gray-500 font-mono">
                    {new Date(item.publishedAt).toLocaleDateString('ja-JP')}
                  </span>
                  <span class="text-sm md:text-base text-gray-300 group-hover:text-white transition-colors font-medium">
                    {item.title}
                  </span>
                </div>
                <span class="text-xs text-gray-600 group-hover:text-white transition-colors">Read →</span>
              </div>
            </a>
          ))
        ) : (
          <div class="bg-[#1a1a1a] p-8 text-center text-gray-500 text-sm">現在お知らせはありません。</div>
        )}
      </div>
    </section>

    {/* Instructor Section */}
    <section class="py-24 bg-[#1f1f1f]">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-12 gap-12 items-center">
          <div class="md:col-span-5 relative">
            <div class="relative z-10">
              <img src="/senzai.png" alt="高橋遊月" class="w-full h-auto shadow-2xl filter sepia-[0.2] contrast-110"/>
              <div class="absolute inset-0 border border-white/10 transform translate-x-4 translate-y-4 -z-10"></div>
            </div>
          </div>
          <div class="md:col-span-7 md:pl-8">
            <p class="text-gray-500 text-xs tracking-[0.3em] uppercase mb-4">Instructor</p>
            <h3 class="text-3xl md:text-4xl font-serif mb-8 text-white">高橋 遊月 <span class="block text-sm text-gray-500 mt-2 font-sans font-normal tracking-wider">Yuzuki Takahashi</span></h3>
            
            <div class="space-y-6 text-gray-400 leading-relaxed font-light">
              <p class="text-white border-l-2 border-gray-700 pl-4">
                東京音楽大学 卒業
              </p>
              <p>
                江東区・清澄白河を中心に、ご自宅への出張ピアノレッスンを行っております。
                これまで多くの門下生を指導し、音楽を通じた心の交流を大切にしてきました。
              </p>
              <p>
                「出張レッスン」だからこそ、移動の負担なく、いつもの慣れ親しんだピアノでリラックスして学んでいただけます。
                きめ細やかな指導で、技術だけでなく、音楽を一生のパートナーにするお手伝いをいたします。
              </p>
            </div>

            <div class="mt-12 pt-8 border-t border-gray-800">
                <p class="italic text-sm text-gray-500 font-serif">
                "音楽は、言葉にできない感情を表現してくれる大切な友。穏やかで上質な時間を提供いたします。"
                </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    {/* Movie Section */}
    <section class="py-24 bg-[#1a1a1a]">
      <div class="max-w-5xl mx-auto px-6 text-center">
         <span class="block text-gray-600 text-xs tracking-widest mb-4 uppercase">Introduction</span>
         <h2 class="text-2xl font-serif text-white mb-12">Movie</h2>
        
        <div class="aspect-video w-full bg-black shadow-2xl border border-gray-800">
          <iframe 
            src="https://www.youtube.com/embed/8iY5cbtwxiM?si=zOM7JXIwvIrbpg-_" 
            title="YouTube video player" 
            class="w-full h-full opacity-90 hover:opacity-100 transition-opacity"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            referrerpolicy="strict-origin-when-cross-origin" 
            allowfullscreen>
          </iframe>
        </div>
      </div>
    </section>

    {/* Fees Section */}
    <section class="py-24 bg-[#252525]">
      <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-16">
          <h2 class="text-2xl font-serif text-white mb-2">Fees & System</h2>
          <p class="text-gray-500 text-xs tracking-widest">レッスン料金</p>
        </div>

        <div class="grid md:grid-cols-3 gap-px bg-gray-700 border border-gray-700">
            {[
                { time: '30min', price: '5,000' },
                { time: '45min', price: '7,500' },
                { time: '60min', price: '10,000' }
            ].map(plan => (
                <div class="bg-[#2a2a2a] p-10 text-center hover:bg-[#333] transition-colors duration-300">
                    <span class="block text-gray-500 text-xs mb-2 font-mono">{plan.time}</span>
                    <span class="text-2xl font-serif text-white">{plan.price}<span class="text-sm ml-1">円</span></span>
                </div>
            ))}
        </div>

        <div class="text-center mt-12">
            <p class="text-sm text-gray-400 mb-8">月1回〜4回まで、ライフスタイルに合わせて受講頻度をお選びいただけます。</p>
            <a href="/lesson" class="inline-block border border-gray-600 text-gray-300 px-12 py-3 hover:bg-white hover:text-black transition-all text-xs tracking-[0.2em] uppercase">
                View More Plans
            </a>
        </div>
      </div>
    </section>

    {/* Area Section */}
    <section class="py-24 px-6 bg-[#1a1a1a]">
      <div class="max-w-6xl mx-auto">
        <div class="grid md:grid-cols-2 gap-16 items-center">
          <div class="order-2 md:order-1">
             <h2 class="text-2xl font-serif text-white mb-8">Service Area</h2>
             <p class="text-gray-400 text-sm leading-loose mb-10">
                江東区<span class="text-white border-b border-gray-600 mx-1">清澄白河・門前仲町</span>エリア<br/>
                自転車または公共交通機関で伺える範囲で活動しています。
             </p>
             <div class="flex flex-wrap gap-2 mb-8">
                {["清澄白河", "門前仲町", "木場", "深川", "森下", "白河", "三好", "平野", "佐賀", "永代", "福住", "冬木", "牡丹", "古石場"].map(area => (
                    <span class="text-xs text-gray-500 border border-gray-800 px-3 py-1">
                    {area}
                    </span>
                ))}
            </div>
            <p class="text-xs text-gray-600 mt-6">
                ※上記以外の地域についてもご相談ください。
            </p>
          </div>
          <div class="order-1 md:order-2 aspect-square md:aspect-video w-full grayscale invert-[.1]">
            <iframe 
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3241.066480572621!2d139.79634597628873!3d35.682701130107765!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188944510b6563%3A0xc3f7a63d91965a39!2z5riF5r6E55m95rKz6aeF!5e0!3m2!1sja!2sjp!4v1711234567890!5m2!1sja!2sjp" 
              width="100%" 
              height="100%" 
              style="border:0;"
              allowfullscreen="" 
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="清澄白河駅周辺地図">
            </iframe>
          </div>
        </div>
      </div>
    </section>

    {/* Contact Section */}
    <section id="contact" class="py-32 bg-gradient-to-b from-[#1a1a1a] to-[#000]">
      <div class="max-w-2xl mx-auto px-6 text-center">
        <h2 class="text-3xl font-serif font-light text-white mb-6">Contact</h2>
        <p class="mb-12 text-sm text-gray-400 leading-loose tracking-wider">
            体験レッスンのお申し込み、ご質問はこちらから。<br/>
            お気軽にお問い合わせください。
        </p>
        
        <a href="/contact" class="inline-block bg-white text-black px-16 py-4 font-medium hover:bg-gray-200 transition-all tracking-[0.2em] text-sm">
            CONTACT FORM
        </a>
      </div>
    </section>

  </main>
</Layout>